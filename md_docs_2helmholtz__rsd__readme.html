<!-- HTML header for doxygen 1.10.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>KaMPIng: helmholtz_rsd_readme</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
    <script type="text/javascript">
        DoxygenAwesomeDarkModeToggle.init()
    </script>
    <script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
    <script type="text/javascript">
        DoxygenAwesomeFragmentCopyButton.init()
    </script>
    <script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
    <script type="text/javascript">
        DoxygenAwesomeParagraphLink.init()
    </script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="icon.svg"/></td>
  <td id="projectalign">
   <div id="projectname">KaMPIng<span id="projectnumber">&#160;0.2.0</span>
   </div>
   <div id="projectbrief">Flexible and (near) zero-overhead C++ bindings for MPI</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('md_docs_2helmholtz__rsd__readme.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">helmholtz_rsd_readme</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This is KaMPIng [kampɪŋ], a (near) zero-overhead MPI wrapper for modern C++.</p>
<p><img src="https://raw.githubusercontent.com/kamping-site/kamping/main/docs/images/logo.svg" alt="KaMPIng logo" style="pointer-events: none;" class="inline"/></p>
<p>It covers the whole range of abstraction levels from low-level MPI calls to convenient STL-style bindings, where most parameters are inferred from a small subset of the full parameter set. This allows for both rapid prototyping and fine-tuning of distributed code with predictable runtime behavior and memory management, unlike other MPI bindings, which are either hard to use or introduce performance pitfalls.</p>
<p>Using template-metaprogramming, only code paths required for computing parameters not provided by the user are generated at compile time, which results in (near) zero-overhead bindings.</p>
<p><b>Quick Start:</b> We provide a wide range of <a href="https://github.com/kamping-site/kamping/tree/main/examples/usage">usage</a> and <a href="https://github.com/kamping-site/kamping/tree/main/examples/applications">simple applications</a> examples (start with <a href="https://github.com/kamping-site/kamping/tree/main/examples/usage/allgatherv_example.cpp"><code>allgatherv</code></a>). Or checkout the <a href="https://kamping-site.github.io/kamping/">documentation</a> for a description of KaMPIng's core concepts and a full reference.</p>
<p>KaMPIng is developed at the <a href="https://ae.iti.kit.edu/english/index.php">Algorithm Engineering Group</a> at Karlsruhe Institute of Technology.</p>
<h2><a class="anchor" id="autotoc_md28"></a>
Features</h2>
<h3><a class="anchor" id="autotoc_md29"></a>
Named Parameters</h3>
<p>Using plain MPI, operations like <code>MPI_Allgatherv</code> often lead to verbose and error-prone boilerplate code:</p>
<div class="fragment"><div class="line"> c++</div>
<div class="line">std::vector&lt;T&gt; v = ...; // Fill with data</div>
<div class="line">int size;</div>
<div class="line">MPI_Comm_size(comm, &amp;size);</div>
<div class="line">int n = static_cast&lt;int&gt;(v.size());</div>
<div class="line">std::vector&lt;int&gt; rc(size), rd(size);</div>
<div class="line">MPI_Allgather(&amp;n, 1, MPI_INT, rc.data(), 1, MPI_INT, comm);</div>
<div class="line">std::exclusive_scan(rc.begin(), rc.end(), rd.begin(), 0);</div>
<div class="line">int n_glob = rc.back() + rd.back();</div>
<div class="line">std::vector&lt;T&gt; v_glob(v_global_size);</div>
<div class="line">MPI_Allgatherv(v.data(), v_size, MPI_TYPE, v_glob.data(), rc.data(), rd.data(), MPI_TYPE, comm);</div>
</div><!-- fragment --><p>In contrast, KaMPIng introduces a streamlined syntax inspired by Python's named parameters. For example, the <code>allgatherv</code> operation becomes more intuitive and concise:</p>
<div class="fragment"><div class="line"> ++</div>
<div class="line">std::vector&lt;T&gt; v = ...; <span class="comment">// Fill with data</span></div>
<div class="line">std::vector&lt;T&gt; v_glob = comm.allgatherv(send_buf(v));</div>
</div><!-- fragment --><p>Empowered by named parameters, KaMPIng allows users to name and pass parameters in arbitrary order, computing default values only for the missing ones. This not only improves readability but also streamlines the code, providing a user-friendly and efficient way of writing MPI applications.</p>
<h3><a class="anchor" id="autotoc_md30"></a>
Controlling memory allocation</h3>
<p>KaMPIng's <em>resize policies</em> allow for fine-grained control over when allocation happens:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">resize policy   </th><th class="markdownTableHeadNone"></th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="group__kamping__mpi__utility.html#ga3743eb9b8525a2e6407ec61383e0f8fa">kamping::resize_to_fit</a></code>   </td><td class="markdownTableBodyNone">resize the container to exactly accommodate the data    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code><a class="el" href="group__kamping__mpi__utility.html#gae63787fc9f8fa60f80cb82e5fd1ae495">kamping::no_resize</a></code>   </td><td class="markdownTableBodyNone">assume that the container has enough memory available to store the data    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code><a class="el" href="group__kamping__mpi__utility.html#ga0f8bf3b1eca55f41d6a9a2d34dda2b61">kamping::grow_only</a></code>   </td><td class="markdownTableBodyNone">only resize the container if it not large enough   </td></tr>
</table>
<div class="fragment"><div class="line"> c++</div>
<div class="line">// easy to use with sane defaults</div>
<div class="line">std::vector&lt;int&gt; v = comm.recv&lt;int&gt;(source(kamping::rank::any));</div>
<div class="line"> </div>
<div class="line">// flexible memory control</div>
<div class="line">std::vector&lt;int&gt; v_out;</div>
<div class="line">v_out.resize(enough_memory_to_fit);</div>
<div class="line">// already_known_counts are the recv_counts that may have been computed already earlier and thus do not need to be computed again</div>
<div class="line">comm.recv&lt;int&gt;(recv_buf&lt;kamping::no_resize&gt;(v_out), recv_count(i_know_already_know_that), source(kamping::rank::any));</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md31"></a>
STL support</h3>
<ul>
<li>KaMPIng works with everything that is a <code>std::contiguous_range</code>, everywhere.</li>
<li>Builtin C++ types are automatically mapped to their corresponding MPI types.</li>
<li>All internally used containers can be altered via template parameters. </li>
</ul>
<h3><a class="anchor" id="autotoc_md32"></a>
Expandability</h3>
<ul>
<li>Don't like the performance of your MPI implementation's reduce algorithm? Just override it using our plugin architecture.</li>
<li>Add additional functionality to communicator objects, without altering any application code.</li>
<li>Easy to integrate with existing MPI code.</li>
<li>Flexible core library for a new toolbox :toolbox: of distributed datastructures and algorithms</li>
</ul>
<h3><a class="anchor" id="autotoc_md33"></a>
And much more ...</h3>
<ul>
<li>Safety guarantees for non-blocking communication and easy handling of multiple requests via request pools</li>
<li>Compile time and runtime error checking (which can be completely deactivated).</li>
<li>Collective hierarchical timers to speed up your evaluation workflow.</li>
<li>...</li>
</ul>
<p>Dive into the <a href="https://kamping-site.github.io/kamping/">documentation</a> or <a href="https://github.com/kamping-site/kamping/tree/main/tests">tests</a> to find out more ...</p>
<h3><a class="anchor" id="autotoc_md34"></a>
(Near) zero overhead - for development and performance</h3>
<p>Using template-metaprogramming, KaMPIng only generates the code paths required for computing parameters not provided by the user. The following shows a complete implementation of distributed sample sort with KaMPIng.</p>
<div class="fragment"><div class="line"> ++</div>
<div class="line"><span class="keywordtype">void</span> sort(MPI_Comm comm_, std::vector&lt;T&gt;&amp; data, <span class="keywordtype">size_t</span> seed) {</div>
<div class="line">    <a class="code hl_class" href="classkamping_1_1Communicator.html">Communicator&lt;&gt;</a> comm(comm_);</div>
<div class="line">    <span class="keywordtype">size_t</span> <span class="keyword">const</span>   oversampling_ratio = 16 * <span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(std::log2(comm.size())) + 1;</div>
<div class="line">    std::vector&lt;T&gt; local_samples(oversampling_ratio);</div>
<div class="line">    std::sample(data.begin(), data.end(), local_samples.begin(), oversampling_ratio, std::mt19937{seed});</div>
<div class="line">    <span class="keyword">auto</span> global_samples = comm.allgather(send_buf(local_samples)).extract_recv_buffer();</div>
<div class="line">    std::sort(global_samples.begin(), global_samples.end());</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; comm.size() - 1; i++) {</div>
<div class="line">        global_samples[i] = global_samples[oversampling_ratio * (i + 1)];</div>
<div class="line">    }</div>
<div class="line">    global_samples.resize(num_splitters);</div>
<div class="line">    std::vector&lt;std::vector&lt;T&gt;&gt; buckets(global_samples.size() + 1);</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; element: data) {</div>
<div class="line">        <span class="keyword">auto</span> <span class="keyword">const</span> bound = std::upper_bound(global_samples.begin(), global_samples.end(), element);</div>
<div class="line">        buckets[<span class="keyword">static_cast&lt;</span><span class="keywordtype">size_t</span><span class="keyword">&gt;</span>(bound - global_samples.begin())].push_back(element);</div>
<div class="line">    }</div>
<div class="line">    data.clear();</div>
<div class="line">    std::vector&lt;int&gt; scounts;</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; bucket: buckets) {</div>
<div class="line">        data.insert(data.end(), bucket.begin(), bucket.end());</div>
<div class="line">        scounts.push_back(<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(bucket.size()));</div>
<div class="line">    }</div>
<div class="line">    data = comm.alltoallv(<a class="code hl_function" href="group__kamping__named__parameters.html#gafdc0902f8c63ed8c71121f7514062de6">send_buf</a>(data), <a class="code hl_function" href="group__kamping__named__parameters.html#ga3bd3242ec8d4e270016a34e8d94de706">send_counts</a>(scounts)).extract_recv_buffer();</div>
<div class="line">    std::sort(data.begin(), data.end());</div>
<div class="line">}</div>
<div class="ttc" id="aclasskamping_1_1Communicator_html"><div class="ttname"><a href="classkamping_1_1Communicator.html">kamping::Communicator&lt;&gt;</a></div></div>
<div class="ttc" id="agroup__kamping__named__parameters_html_ga3bd3242ec8d4e270016a34e8d94de706"><div class="ttname"><a href="group__kamping__named__parameters.html#ga3bd3242ec8d4e270016a34e8d94de706">kamping::params::send_counts</a></div><div class="ttdeci">auto send_counts(Container &amp;&amp;container)</div><div class="ttdoc">Passes a container as send counts to the underlying call, i.e. the container's storage must contain t...</div><div class="ttdef"><b>Definition</b> named_parameters.hpp:205</div></div>
<div class="ttc" id="agroup__kamping__named__parameters_html_gafdc0902f8c63ed8c71121f7514062de6"><div class="ttname"><a href="group__kamping__named__parameters.html#gafdc0902f8c63ed8c71121f7514062de6">kamping::params::send_buf</a></div><div class="ttdeci">auto send_buf(internal::ignore_t&lt; Data &gt; ignore)</div><div class="ttdoc">Generates a dummy send buf that wraps a nullptr.</div><div class="ttdef"><b>Definition</b> named_parameters.hpp:53</div></div>
</div><!-- fragment --><p> It is a lot more concise than the <a href="https://github.com/kamping-site/kamping/tree/main/examples/applications/sample-sort/mpi.hpp">(verbose) plain MPI implementation</a>, but also introduces no additional overhead to achieve this, as can be seen the following experiment. There we compare the sorting implementation in KaMPIng to other MPI bindings.</p>
<p><img src="https://raw.githubusercontent.com/kamping-site/kamping/main/plot.svg" alt="" style="pointer-events: none;" class="inline"/> </p>
<h2><a class="anchor" id="autotoc_md35"></a>
Platform</h2>
<ul>
<li>intensively tested with GCC and Clang and OpenMPI and IntelMPI</li>
<li>requires a C++17 ready compiler</li>
<li>easy integration into other projects using modern CMake</li>
</ul>
<h2><a class="anchor" id="autotoc_md36"></a>
LICENSE</h2>
<p>KaMPIng is released under the GNU Lesser General Public License. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
